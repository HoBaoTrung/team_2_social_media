<header th:fragment="header"
        xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        .navigation-center {
            gap: 40px;
            background-color: #252728;
            padding: 8px 20px;
            border-radius: 10px;
            display: flex;
        }

        /* ===== N√∫t icon ƒëi·ªÅu h∆∞·ªõng (d·∫°ng tr√≤n) ===== */
        .nav-icon-wrapper {
            background-color: #3a3b3c;
            border-radius: 50%;
            /*padding: 16px; !* üëà tƒÉng padding ƒë·ªÉ khung tr√≤n to h∆°n *!*/
            width: 64px;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s ease;
            position: relative;
        }

        .nav-icon-wrapper:hover {
            background-color: #4e4f50;
            cursor: pointer;
        }

        .nav-icon-wrapper.active,
        .nav-icon-wrapper:focus-within {
            background-color: #4e69a2;
        }

        .nav-icon {
            color: white;
            /*font-size: 24px; !* üëà tƒÉng k√≠ch th∆∞·ªõc icon n·∫øu c·∫ßn *!*/
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* ===== Style cho nav bar ===== */
        .navbar-dark {
            background-color: #242526 !important;
        }

        .navbar-brand {
            font-weight: bold;
            color: white;
        }

        .navbar-brand:hover {
            color: #ddd;
        }

        /* ===== Link trong nav-center ho·∫∑c nav-right (n√∫t ch·ªØ) ===== */
        .navigation-center a,
        .navigation-right a {
            font-size: 14px;
            border-radius: 5px;
            text-decoration: none;
            padding: 10px 50px;
            color: #fff;
            background: #333;
            display: flex;
            flex-direction: column;
            text-transform: uppercase;
            margin: 10px 0px;
            letter-spacing: 1px;
            text-align: center;
            transition: 0.3s ease;
        }

        .navigation-center a:hover,
        .navigation-right a:hover {
            background: #ff6ecf;
            transform: scale(1.1);
        }
    </style>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
        <div class="container-fluid d-flex justify-content-between align-items-center px-3">

            <!-- LEFT: Logo + Search -->
            <div class="d-flex align-items-center" style="gap: 10px;">
                <a class="navbar-brand me-2" th:href="@{/}">SocialNet</a>
                <form class="d-none d-md-block" role="search">
                    <input class="form-control form-control-sm" type="search" placeholder="T√¨m ki·∫øm..."
                           aria-label="Search">
                </form>
            </div>

            <!-- CENTER: Navigation icons -->
            <div class="d-none d-lg-flex justify-content-center flex-grow-1 navigation-center ">
                <a class="nav-link nav-icon nav-icon-wrapper" th:href="@{/}" title="Trang ch·ªß" data-bs-toggle="tooltip"
                   data-bs-placement="bottom">
                    <i class="fas fa-home"></i>
                </a>
                <a class="nav-link nav-icon nav-icon-wrapper" th:href="@{/friends}" title="B·∫°n b√®" data-bs-toggle="tooltip"
                   data-bs-placement="bottom">
                    <i class="fas fa-user-friends"></i>
                </a>
                <a class="nav-link nav-icon nav-icon-wrapper" th:href="@{/market}" title="Marketplace" data-bs-toggle="tooltip"
                   data-bs-placement="bottom">
                    <i class="fas fa-store"></i>
                </a>
                <a class="nav-link nav-icon nav-icon-wrapper" th:href="@{/groups}" title="Nh√≥m" data-bs-toggle="tooltip"
                   data-bs-placement="bottom">
                    <i class="fas fa-users"></i>
                </a>
            </div>


            <!-- RIGHT: Messages, Notifications, User -->
            <div class="d-flex align-items-center gap-3">
                <!-- Icon Tin nh·∫Øn -->
                <div class="nav-icon-wrapper" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Tin nh·∫Øn">
                    <a class="nav-icon" th:href="@{/messages}">
                        <i class="fas fa-comment-dots fa-lg"></i>
                    </a>
                </div>

                <!-- Icon Th√¥ng b√°o -->
                <div class="nav-icon-wrapper" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Th√¥ng b√°o">
                    <a class="nav-icon" th:href="@{/notifications}">
                        <i class="fas fa-bell fa-lg"></i>
                    </a>
                </div>

                <!-- N·∫øu ƒë√£ ƒëƒÉng nh·∫≠p -->
                <div class="nav-item dropdown nav-icon-wrapper" sec:authorize="isAuthenticated()"
                     data-bs-toggle="tooltip" data-bs-placement="bottom" title="T√†i kho·∫£n c√° nh√¢n">
                    <a class="nav-icon dropdown-toggle" href="#" id="userDropdown" role="button"
                       data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="fas fa-user-circle fa-lg"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                        <li><a class="dropdown-item" th:href="@{/profile}">Th√¥ng tin c√° nh√¢n</a></li>
                        <li><a class="dropdown-item" th:href="@{/settings}">C√†i ƒë·∫∑t</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li>
                            <form th:action="@{/logout}" method="post" style="margin: 0;">
                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                                <button type="submit" class="dropdown-item text-danger">ƒêƒÉng xu·∫•t</button>
                            </form>
                        </li>
                    </ul>
                </div>

                <!-- N·∫øu ch∆∞a ƒëƒÉng nh·∫≠p -->
                <div class="nav-item nav-icon-wrapper" sec:authorize="!isAuthenticated()" data-bs-toggle="tooltip"
                     data-bs-placement="bottom" title="ƒêƒÉng nh·∫≠p">
                    <a class="nav-icon" th:href="@{/login}">
                        <i class="fas fa-sign-in-alt fa-lg"></i>
                    </a>
                </div>
            </div>

            <!--            <div class="d-flex align-items-center" style="gap: 20px;">-->
<!--                <div class="navigation-right">-->
<!--                    <a class="nav-link text-white" th:href="@{/messages}" title="Tin nh·∫Øn" data-bs-toggle="tooltip"-->
<!--                       data-bs-placement="bottom">-->
<!--                        <i class="fas fa-comment-dots fa-lg"></i>-->
<!--                    </a>-->
<!--                    <a class="nav-link text-white" th:href="@{/notifications}" title="Th√¥ng b√°o"-->
<!--                       data-bs-toggle="tooltip" data-bs-placement="bottom">-->
<!--                        <i class="fas fa-bell fa-lg"></i>-->
<!--                    </a>-->
<!--                </div>-->
<!--                &lt;!&ndash; N·∫øu ƒë√£ ƒëƒÉng nh·∫≠p &ndash;&gt;-->
<!--                <div class="nav-item dropdown" sec:authorize="isAuthenticated()">-->
<!--                    <a class="nav-link dropdown-toggle text-white" href="#" id="userDropdown" role="button"-->
<!--                       data-bs-toggle="dropdown" aria-expanded="false" title="T√†i kho·∫£n c√° nh√¢n">-->
<!--                        <i class="fas fa-user-circle fa-lg"></i>-->
<!--                        <span class="d-none d-md-inline" th:text="${#authentication.principal instanceof T(org.springframework.security.oauth2.core.user.OAuth2User)-->
<!--                                     ? #authentication.principal.attributes['name']-->
<!--                                     : #authentication.name}">T√™n ng∆∞·ªùi d√πng</span>-->
<!--                    </a>-->

<!--                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">-->
<!--                        <li><a class="dropdown-item" th:href="@{/profile}">Th√¥ng tin c√° nh√¢n</a></li>-->
<!--                        <li><a class="dropdown-item" th:href="@{/settings}">C√†i ƒë·∫∑t</a></li>-->
<!--                        <li>-->
<!--                            <hr class="dropdown-divider">-->
<!--                        </li>-->
<!--                        <li>-->
<!--                            <form th:action="@{/logout}" method="post" style="margin: 0;">-->
<!--                                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>-->
<!--                                <button type="submit" class="dropdown-item text-danger">ƒêƒÉng xu·∫•t</button>-->
<!--                            </form>-->
<!--                        </li>-->
<!--                    </ul>-->
<!--                </div>-->

<!--                &lt;!&ndash; N·∫øu ch∆∞a ƒëƒÉng nh·∫≠p &ndash;&gt;-->
<!--                <div class="nav-item" sec:authorize="!isAuthenticated()">-->
<!--                    <a class="nav-link text-white" th:href="@{/login}" title="ƒêƒÉng nh·∫≠p" data-bs-toggle="tooltip"-->
<!--                       data-bs-placement="bottom">-->
<!--                        <i class="fas fa-sign-in-alt fa-lg"></i>-->
<!--                    </a>-->
<!--                </div>-->
<!--            </div>-->

        </div>
    </nav>

    <script>
        // K√≠ch ho·∫°t Bootstrap tooltip
        document.addEventListener("DOMContentLoaded", function () {
            const tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });

            // Active tab logic
            const navLinks = document.querySelectorAll(".nav-link");
            const currentPath = window.location.pathname;

            navLinks.forEach(link => {
                const href = link.getAttribute("href");
                if (href && currentPath.startsWith(href)) {
                    link.classList.add("active");
                } else {
                    link.classList.remove("active");
                }
            });
        });
    </script>
</header>
